!function e(t,i,a){function r(l,d){if(!i[l]){if(!t[l]){var o="function"==typeof require&&require;if(!d&&o)return o(l,!0);if(n)return n(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var h=i[l]={exports:{}};t[l][0].call(h.exports,function(e){var i=t[l][1][e];return r(i?i:e)},h,h.exports,e,t,i,a)}return i[l].exports}for(var n="function"==typeof require&&require,l=0;l<a.length;l++)r(a[l]);return r}({1:[function(e,t,i){var a=function(e,t,i,a,r,n){"use strict";function l(e){var a={},r={};a.height=t.innerHeight-100,a.width=t.innerWidth<=600?600:t.innerWidth-100,r.height=e.getHeight(),r.width=e.getWidth();var n=+(a.width/r.width).toFixed(2),l=+(a.height/r.height).toFixed(2),d=a.width>=r.width?a.height>=r.height?1:l:a.height>=r.height||a.height>=n*r.height?n:l;return 1!==d||i.querySelector(".save-checkbox-row").classList.contains("hidden")||i.querySelector(".save-checkbox-row").classList.add("hidden"),1>d&&i.querySelector(".save-checkbox-row").classList.contains("hidden")&&i.querySelector(".save-checkbox-row").classList.remove("hidden"),{pct:d,height:r.height*d,width:r.width*d}}function d(){var e=i.createElement("div");e.classList.add("load-msg"),e.appendChild(i.createTextNode("image loaded")),i.querySelector(".mirrors").classList.contains("img-loaded")&&i.querySelector(".mirrors").classList.remove("img-loaded"),i.getElementById("urlfield").removeEventListener("change",h),i.getElementById("fileupload").removeEventListener("change",h),i.getElementById("demo").removeEventListener("click",h),i.querySelector(".mirror-controller-panel").insertBefore(e,i.querySelector(".mirrors")),r(function(){i.querySelector(".mirror-controller-panel").removeChild(i.querySelector(".load-msg")),i.getElementById("urlfield").addEventListener("change",h),i.getElementById("fileupload").addEventListener("change",h),i.getElementById("demo").addEventListener("click",h),i.querySelector(".mirrors").classList.add("img-loaded")},2e3)}function o(t){var r=null===i.getElementById("canvas")?i.createElement("canvas"):i.getElementById("canvas");r.id||(r.id="canvas",r.classList.add("canvas")),0===i.getElementById("canvas-wrapper").children.length&&(i.getElementById("canvas-wrapper").appendChild(r),r=i.getElementById("canvas"));var n=i.querySelector(".canvas-container")?r.fabric:new e.Canvas("canvas",{hasBorders:!1,centeredScaling:!0,originX:"left",originY:"top"});return i.querySelector(".canvas-container").style.display="none",H=new a,H.setAttribute("crossOrigin","anonymous"),r.hasAttribute("data-filled")&&(r.removeAttribute("data-filled"),i.querySelector(".save-options").classList.remove("active-image")),r.hasAttribute("data-mtype")&&r.removeAttribute("data-mtype"),H.src=t,H.id="image",H.onload=function(){n._objects[0]&&n.remove(n._objects[0]),H=new e.Image(H,{hasBorders:!1,originX:"left",originY:"top"}),d(),null!==i.querySelector(".active")&&i.querySelector(".active").classList.remove("active");var t=l(H);return i.getElementById("canvas").setAttribute("data-pct",t.pct),n.setHeight(t.height),n.setWidth(t.width),i.getElementById("canvas").fabric=n,H},H}function s(t){var a=i.createElement("canvas"),r=a;return r.id="simcanvas",r.classList.add("simcanvas"),i.getElementById("canvas-wrapper").appendChild(r),a=new e.Canvas("simcanvas"),a.setWidth(t.width),a.setHeight(t.height),r.setAttribute("data-mtype",i.getElementById("canvas").getAttribute("data-mtype")),r.fabric=a,a}function h(e){if("urlfield"===e.target.id){var t=new RegExp(/^http(s)?:\/\/.+((\.)(bmp|svg|jpg|gif|png))$/);if(""!==e.target.value&t.test(e.target.value)===!0){var a=new XMLHttpRequest;a.open("GET",e.target.value,!0),a.onload=function(){return this.status>=200&&this.status<400?void(H=o(e.target.value)):(alert("Your URL did not load. Please try a different URL."),!1)},a.onerror=function(){return alert("It appears you used a server that does not have cross-origin resource sharing (CORS) enabled. Please enable CORS on your server, or try a different URL."),!1},a.send()}else alert("Please enter a valid image URL.")}if("fileupload"===e.target.id){var r=i.getElementById("fileupload"),n=r.files[0],l=new FileReader;l.addEventListener("load",function(e){var t=l.result;H=o(t)},!1),n&&l.readAsDataURL(n)}"demo"===e.target.id&&(H=o("./assets/2.jpg"))}function c(t,i,a,r){return new e.Rect({hasBorders:!1,strokeWidth:0,left:t,top:i,width:a,height:r})}function y(t,i,a,r,n,l){var d,o,s,h;switch(r.set({clipTo:function(e){return d.render(e)}}),a){case"left":d=c(-i.hWidth,-i.hHeight,i.hWidth,i.tHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?-i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?i.hWidth:0}),n.add(r,o);break;case"right":d=c(0,-i.hHeight,i.hWidth,i.tHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?-i.hWidth:0}),n.add(r,o);break;case"top":d=c(-i.hWidth,-i.hHeight,i.tWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0}),o=e.util.object.clone(r),o.set({flipX:"x"===B||"xy"===B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0}),n.add(r,o);break;case"bottom":d=c(-i.hWidth,0,i.tWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0}),o=e.util.object.clone(r),o.set({flipX:"x"===B||"xy"===B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0}),n.add(r,o);break;case"top left":d=c(-i.hWidth,-i.hHeight,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),s=e.util.object.clone(o),s.set({flipX:!0,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),h=e.util.object.clone(s),h.set({flipX:!1,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),n.add(r,o,s,h);break;case"top right":d=c(0,-i.hHeight,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),s=e.util.object.clone(o),s.set({flipX:!0,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),h=e.util.object.clone(s),h.set({flipX:!1,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),n.add(r,o,s,h);break;case"bottom left":d=c(-i.hWidth,0,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),s=e.util.object.clone(o),s.set({flipX:!0,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),h=e.util.object.clone(s),h.set({flipX:!1,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),n.add(r,o,s,h);break;case"bottom right":d=c(0,0,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),s=e.util.object.clone(o),s.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),h=e.util.object.clone(s),h.set({flipX:"x"===B||"xy"===B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),n.add(r,o,s,h)}t.add(n),t.renderAll()}function g(t,a){var r=a?i.getElementById("simcanvas"):i.getElementById("canvas"),n=r.fabric,l=e.util.object.clone(H),d=new e.Group,o=a?1:+r.getAttribute("data-pct"),s={};r.hasAttribute("data-filled")&&n.remove(n._objects[0]),d.set({strokeWidth:0,originX:"left",originY:"top",scale:o,hasborders:!1}),l.set({strokeWidth:0,width:l.getWidth()*o,height:l.getHeight()*o,originX:"left",originY:"top",scale:o,hasborders:!1}),s={tWidth:n.getWidth(),tHeight:n.getHeight(),hHeight:n.getHeight()/2,hWidth:n.getWidth()/2},r.hasAttribute("data-filled")||(r.setAttribute("data-filled",!0),i.querySelector(".save-options").classList.add("active-image"),i.querySelector(".canvas-container").style.display="block"),r.setAttribute("data-mtype",t),y(n,s,t,l,d,o)}function u(e){return void 0===H?!1:(null!==i.querySelector(".active")&&i.querySelector(".active").classList.remove("active"),e.target.classList.add("active"),void g(e.target.value))}function f(e){0!==e.target.value.length||e.target.hasAttribute("data-message")||(alert("For the image to load, make sure you use a server with CORS enabled."),e.target.setAttribute("data-message","1"))}function p(){if(null!==i.getElementById("canvas")&&i.getElementById("canvas").hasAttribute("data-mtype")){var e=l(H),t=i.getElementById("canvas"),a=t.fabric;t.setAttribute("data-pct",e.pct),a.setHeight(e.height),a.setWidth(e.width),g(i.getElementById("canvas").getAttribute("data-mtype"),!1)}}function x(e){var a=i.getElementById("canvas"),r=a.fabric,n=a.getAttribute("data-pct")<1?i.getElementById("preserve").checked:null;n===!0&&(r=s(H),a=i.getElementById("simcanvas"),g(a.getAttribute("data-mtype"),!0));var l=r.toDataURL("image/png");t.open(l),"simcanvas"===a.id&&i.getElementById("canvas-wrapper").removeChild(i.getElementById("simcanvas").parentNode)}function v(e){e.setAttribute("data-checked",!JSON.parse(e.getAttribute("data-checked"))),e.checked="true"===e.getAttribute("data-checked"),e.previousElementSibling.classList.toggle("checked")}function m(e){var t=e.target,a="invert_x"===t.id?i.getElementById("invert_y"):i.getElementById("invert_x");v(t),B=t.checked?a.checked?"xy":t.value:a.checked?a.value:null,null!==i.querySelector(".active")&&g(i.getElementById("canvas").getAttribute("data-mtype"),!1)}function b(e){var t=e.target;v(t)}function E(e,t,i){var a;return function(){var l=this,d=arguments,o=function(){a=null,i||e.apply(l,d)},s=i&&!a;n(a),a=r(o,t),s&&e.apply(l,d)}}function W(){t.addEventListener("resize",E(function(){p()},250)),i.getElementById("urlfield").addEventListener("focus",f),i.getElementById("urlfield").addEventListener("change",h),i.getElementById("fileupload").addEventListener("change",h),i.getElementById("demo").addEventListener("click",h),i.getElementById("invert_x").addEventListener("click",m),i.getElementById("invert_y").addEventListener("click",m),i.getElementById("preserve").addEventListener("click",b),i.getElementById("savebtnpng").addEventListener("click",x);for(var e=0;e<i.querySelectorAll(".mirror-btns button").length;e++)i.querySelectorAll(".mirror-block-btn")[e].addEventListener("click",u)}var H,B;t.onload=W}(fabric,window,document,Image,setTimeout,clearTimeout);t.exports=a},{}]},{},[1]);