!function e(t,i,a){function r(n,d){if(!i[n]){if(!t[n]){var o="function"==typeof require&&require;if(!d&&o)return o(n,!0);if(l)return l(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var s=i[n]={exports:{}};t[n][0].call(s.exports,function(e){var i=t[n][1][e];return r(i?i:e)},s,s.exports,e,t,i,a)}return i[n].exports}for(var l="function"==typeof require&&require,n=0;n<a.length;n++)r(a[n]);return r}({1:[function(e,t,i){var a=function(e,t,i,a,r,l){"use strict";function n(e){var a={},r={};a.height=t.innerHeight-100,a.width=t.innerWidth<=600?600:t.innerWidth-100,r.height=e.getHeight(),r.width=e.getWidth();var l=+(a.width/r.width).toFixed(2),n=+(a.height/r.height).toFixed(2),d=a.width>=r.width?a.height>=r.height?1:n:a.height>=r.height||a.height>=l*r.height?l:n;return 1!==d||i.querySelector(".save-checkbox-row").classList.contains("hidden")||i.querySelector(".save-checkbox-row").classList.add("hidden"),1>d&&i.querySelector(".save-checkbox-row").classList.contains("hidden")&&i.querySelector(".save-checkbox-row").classList.remove("hidden"),{pct:d,height:r.height*d,width:r.width*d}}function d(){var e=i.createElement("div");e.classList.add("load-msg"),e.appendChild(i.createTextNode("image loaded")),i.querySelector(".mirrors").classList.contains("img-loaded")&&i.querySelector(".mirrors").classList.remove("img-loaded"),i.getElementById("urlfield").removeEventListener("change",s),i.getElementById("fileupload").removeEventListener("change",s),i.getElementById("demo").removeEventListener("click",s),i.querySelector(".mirror-controller-panel").insertBefore(e,i.querySelector(".mirrors")),r(function(){i.querySelector(".mirror-controller-panel").removeChild(i.querySelector(".load-msg")),i.getElementById("urlfield").addEventListener("change",s),i.getElementById("fileupload").addEventListener("change",s),i.getElementById("demo").addEventListener("click",s),i.querySelector(".mirrors").classList.add("img-loaded")},2e3)}function o(t){var r=null===i.getElementById("canvas")?i.createElement("canvas"):i.getElementById("canvas");r.id||(r.id="canvas",r.classList.add("canvas")),0===i.getElementById("canvas-wrapper").children.length&&(i.getElementById("canvas-wrapper").appendChild(r),r=i.getElementById("canvas"));var l=i.querySelector(".canvas-container")?r.fabric:new e.Canvas("canvas",{hasBorders:!1,centeredScaling:!0,originX:"left",originY:"top"});return i.querySelector(".canvas-container").style.display="none",H=new a,r.hasAttribute("data-filled")&&(r.removeAttribute("data-filled"),i.querySelector(".save-options").classList.remove("active-image")),r.hasAttribute("data-mtype")&&r.removeAttribute("data-mtype"),H.src=t,H.id="image",H.onload=function(){l._objects[0]&&l.remove(l._objects[0]),H=new e.Image(H,{hasBorders:!1,originX:"left",originY:"top"}),d(),null!==i.querySelector(".active")&&i.querySelector(".active").classList.remove("active");var t=n(H);return i.getElementById("canvas").setAttribute("data-pct",t.pct),l.setHeight(t.height),l.setWidth(t.width),i.getElementById("canvas").fabric=l,H},H}function h(t){var a=i.createElement("canvas"),r=a;return r.id="simcanvas",r.classList.add("simcanvas"),i.getElementById("canvas-wrapper").appendChild(r),a=new e.Canvas("simcanvas"),a.setWidth(t.width),a.setHeight(t.height),r.setAttribute("data-mtype",i.getElementById("canvas").getAttribute("data-mtype")),r.fabric=a,a}function s(e){if("urlfield"===e.target.id){var t=new RegExp(/^http(s)?:\/\/.+((\.)(bmp|svg|jpg|gif|png))$/);if(""!==e.target.value&t.test(e.target.value)===!0){var a=new XMLHttpRequest;a.open("GET",e.target.value,!0),a.onload=function(){return this.status>=200&&this.status<400?void(H=o(e.target.value)):(alert("Your URL did not load. Please try a different URL."),!1)},a.onerror=function(){return alert("It appears you used a server that does not have cross-origin resource sharing (CORS) enabled. Please enable CORS on your server, or try a different URL."),!1},a.send()}else alert("Please enter a valid image URL.")}if("fileupload"===e.target.id){var r=i.getElementById("fileupload"),l=r.files[0],n=new FileReader;n.addEventListener("load",function(e){var t=n.result;H=o(t)},!1),l&&n.readAsDataURL(l)}"demo"===e.target.id&&(H=o("./assets/2.jpg"))}function c(t,i,a,r){return new e.Rect({hasBorders:!1,strokeWidth:0,left:t,top:i,width:a,height:r})}function y(t,i,a,r,l,n){var d,o,h,s;switch(r.set({clipTo:function(e){return d.render(e)}}),a){case"left":d=c(-i.hWidth,-i.hHeight,i.hWidth,i.tHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?-i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?i.hWidth:0}),l.add(r,o);break;case"right":d=c(0,-i.hHeight,i.hWidth,i.tHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,left:"x"===B||"xy"===B?-i.hWidth:0}),l.add(r,o);break;case"top":d=c(-i.hWidth,-i.hHeight,i.tWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0}),o=e.util.object.clone(r),o.set({flipX:"x"===B||"xy"===B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0}),l.add(r,o);break;case"bottom":d=c(-i.hWidth,0,i.tWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0}),o=e.util.object.clone(r),o.set({flipX:"x"===B||"xy"===B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0}),l.add(r,o);break;case"top left":d=c(-i.hWidth,-i.hHeight,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),h=e.util.object.clone(o),h.set({flipX:!0,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),s=e.util.object.clone(h),s.set({flipX:!1,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),l.add(r,o,h,s);break;case"top right":d=c(0,-i.hHeight,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),h=e.util.object.clone(o),h.set({flipX:!0,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),s=e.util.object.clone(h),s.set({flipX:!1,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),l.add(r,o,h,s);break;case"bottom left":d=c(-i.hWidth,0,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),h=e.util.object.clone(o),h.set({flipX:!0,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),s=e.util.object.clone(h),s.set({flipX:!1,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),l.add(r,o,h,s);break;case"bottom right":d=c(0,0,i.hWidth,i.hHeight),r.set({flipX:"x"===B||"xy"===B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),o=e.util.object.clone(r),o.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"===B||"xy"===B,top:"y"===B||"xy"===B?i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),h=e.util.object.clone(o),h.set({flipX:"x"!==B&&"xy"!==B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?-i.hWidth:0}),s=e.util.object.clone(h),s.set({flipX:"x"===B||"xy"===B,flipY:"y"!==B&&"xy"!==B,top:"y"===B||"xy"===B?-i.hHeight:0,left:"x"===B||"xy"===B?i.hWidth:0}),l.add(r,o,h,s)}t.add(l),t.renderAll()}function g(t,a){var r=a?i.getElementById("simcanvas"):i.getElementById("canvas"),l=r.fabric,n=e.util.object.clone(H),d=new e.Group,o=a?1:+r.getAttribute("data-pct"),h={};r.hasAttribute("data-filled")&&l.remove(l._objects[0]),d.set({strokeWidth:0,originX:"left",originY:"top",scale:o,hasborders:!1}),n.set({strokeWidth:0,width:n.getWidth()*o,height:n.getHeight()*o,originX:"left",originY:"top",scale:o,hasborders:!1}),h={tWidth:l.getWidth(),tHeight:l.getHeight(),hHeight:l.getHeight()/2,hWidth:l.getWidth()/2},r.hasAttribute("data-filled")||(r.setAttribute("data-filled",!0),i.querySelector(".save-options").classList.add("active-image"),i.querySelector(".canvas-container").style.display="block"),r.setAttribute("data-mtype",t),y(l,h,t,n,d,o)}function u(e){return void 0===H?!1:(null!==i.querySelector(".active")&&i.querySelector(".active").classList.remove("active"),e.target.classList.add("active"),void g(e.target.value))}function f(e){0!==e.target.value.length||e.target.hasAttribute("data-message")||(alert("For the image to load, make sure you use a server with CORS enabled."),e.target.setAttribute("data-message","1"))}function p(){if(null!==i.getElementById("canvas")&&i.getElementById("canvas").hasAttribute("data-mtype")){var e=n(H),t=i.getElementById("canvas"),a=t.fabric;t.setAttribute("data-pct",e.pct),a.setHeight(e.height),a.setWidth(e.width),g(i.getElementById("canvas").getAttribute("data-mtype"),!1)}}function x(e){var a=i.getElementById("canvas"),r=a.fabric,l=a.getAttribute("data-pct")<1?i.getElementById("preserve").checked:null;l===!0&&(r=h(H),a=i.getElementById("simcanvas"),g(a.getAttribute("data-mtype"),!0));var n=r.toDataURL("image/png");t.open(n),"simcanvas"===a.id&&i.getElementById("canvas-wrapper").removeChild(i.getElementById("simcanvas").parentNode)}function v(e){e.setAttribute("data-checked",!JSON.parse(e.getAttribute("data-checked"))),e.checked="true"===e.getAttribute("data-checked"),e.previousElementSibling.classList.toggle("checked")}function m(e){var t=e.target,a="invert_x"===t.id?i.getElementById("invert_y"):i.getElementById("invert_x");v(t),B=t.checked?a.checked?"xy":t.value:a.checked?a.value:null,null!==i.querySelector(".active")&&g(i.getElementById("canvas").getAttribute("data-mtype"),!1)}function b(e){var t=e.target;v(t)}function E(e,t,i){var a;return function(){var n=this,d=arguments,o=function(){a=null,i||e.apply(n,d)},h=i&&!a;l(a),a=r(o,t),h&&e.apply(n,d)}}function W(){t.addEventListener("resize",E(function(){p()},250)),i.getElementById("urlfield").addEventListener("focus",f),i.getElementById("urlfield").addEventListener("change",s),i.getElementById("fileupload").addEventListener("change",s),i.getElementById("demo").addEventListener("click",s),i.getElementById("invert_x").addEventListener("click",m),i.getElementById("invert_y").addEventListener("click",m),i.getElementById("preserve").addEventListener("click",b),i.getElementById("savebtnpng").addEventListener("click",x);for(var e=0;e<i.querySelectorAll(".mirror-btns button").length;e++)i.querySelectorAll(".mirror-block-btn")[e].addEventListener("click",u)}var H,B;t.onload=W}(fabric,window,document,Image,setTimeout,clearTimeout);t.exports=a},{}]},{},[1]);